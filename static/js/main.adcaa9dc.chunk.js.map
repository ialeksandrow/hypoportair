{"version":3,"sources":["images/logo.svg","components/Menu.jsx","common/menu-links.js","components/Navigation.jsx","helpers/booking-validator.schema.js","common/token.js","components/TicketReservation.jsx","components/UserReservations.jsx","components/Footer.jsx","common/pagination-settings.js","views/Homepage.jsx","App.jsx","index.js"],"names":["Menu","menuLinks","useState","activeLink","setActiveLink","className","map","link","href","pointer","onClick","name","Navigation","id","src","logo","alt","bookingValidatorSchema","firstName","value","trim","length","msg","lastName","departureAirportId","parseInt","arrivalAirportId","departureDate","Date","parse","now","returnDate","token","TicketReservation","airports","setBookings","booking","setBooking","formError","setFormError","onSubmit","e","placedBooking","preventDefault","Object","entries","every","fieldKey","fieldValue","fieldValidity","fetch","method","headers","body","JSON","stringify","then","res","json","resData","bookings","list","totalCount","keys","reduce","acc","field","catch","err","console","error","handleTicketReservation","htmlFor","type","onChange","target","airport","title","UserReservations","bookingId","ok","filter","Error","toLocaleString","split","code","Footer","rel","paginationSettings","pageSize","Homepage","setAirports","page","setPage","useEffect","existingBookings","window","onscroll","innerHeight","document","documentElement","scrollTop","offsetHeight","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.adcaa9dc.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.d176cb36.svg\";","import { useState } from 'react';\r\n\r\nconst Menu = ({ menuLinks }) => {\r\n  const [activeLink, setActiveLink] = useState(null);\r\n\r\n  return (\r\n    <ul className=\"main-menu\">\r\n      {menuLinks.map(link => (\r\n        <li key={link.pointer} className=\"main-menu__item\">\r\n          <a\r\n            href={link.pointer}\r\n            className={\r\n              link.pointer === activeLink?.pointer\r\n                ? 'main-menu__link--active'\r\n                : 'main-menu__link'\r\n            }\r\n            onClick={() => setActiveLink(link)}\r\n          >\r\n            {link.name}\r\n          </a>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","const menuLinks = [\r\n  { name: 'Book Flight', pointer: '#ticket-reservation' },\r\n  { name: 'My Bookings', pointer: '#reservations' }\r\n];\r\n\r\nexport default menuLinks;\r\n","import logo from './../images/logo.svg';\r\nimport Menu from './Menu';\r\nimport menuLinks from './../common/menu-links';\r\n\r\nconst Navigation = () => {\r\n  return (\r\n    <nav id=\"main-nav\">\r\n      <div className=\"container\">\r\n        <img src={logo} alt=\"HypoportAIR\" className=\"logo\" />\r\n        <Menu menuLinks={menuLinks} />\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","const bookingValidatorSchema = {\r\n  firstName: value =>\r\n    typeof value === 'string' &&\r\n    value.trim().length > 0 &&\r\n    value.trim().length <= 30\r\n      ? true\r\n      : { msg: 'Invalid first name.' },\r\n  lastName: value =>\r\n    typeof value === 'string' &&\r\n    value.trim().length > 0 &&\r\n    value.trim().length <= 30\r\n      ? true\r\n      : { msg: 'Invalid last name.' },\r\n  departureAirportId: value =>\r\n    parseInt(value) && value > 0\r\n      ? true\r\n      : { msg: 'Invalid departure airport id.' },\r\n  arrivalAirportId: value =>\r\n    parseInt(value) && value > 0\r\n      ? true\r\n      : { msg: 'Invalid arrival airport id.' },\r\n  departureDate: value =>\r\n    Date.parse(new Date(value)) > Date.now()\r\n      ? true\r\n      : { msg: 'Invalid departure date.' },\r\n  returnDate: value =>\r\n    Date.parse(new Date(value)) > Date.now() + 172.8e5\r\n      ? true\r\n      : { msg: 'Invalid return date.' }\r\n};\r\n\r\nexport default bookingValidatorSchema;\r\n","const token = 'iBpxiMGev7IfACzGv25UgB24EbkFxY';\r\n\r\nexport default token;\r\n","import { useState } from 'react';\r\nimport bookingValidatorSchema from './../helpers/booking-validator.schema';\r\nimport token from './../common/token';\r\n\r\nconst TicketReservation = ({ airports, setBookings }) => {\r\n  const [booking, setBooking] = useState({\r\n    firstName: '',\r\n    lastName: '',\r\n    departureAirportId: '',\r\n    arrivalAirportId: '',\r\n    departureDate: '',\r\n    returnDate: ''\r\n  });\r\n  const [formError, setFormError] = useState({ msg: '' });\r\n\r\n  const handleTicketReservation = (e, placedBooking) => {\r\n    e.preventDefault();\r\n\r\n    const formValidity = Object.entries(placedBooking).every(\r\n      ([fieldKey, fieldValue]) => {\r\n        const fieldValidity = bookingValidatorSchema[fieldKey](fieldValue);\r\n\r\n        if (fieldValidity === true) {\r\n          return true;\r\n        }\r\n\r\n        setFormError(fieldValidity);\r\n\r\n        return false;\r\n      }\r\n    );\r\n\r\n    if (!formValidity) {\r\n      return;\r\n    }\r\n\r\n    fetch(\r\n      `https://vm-fe-interview-task.herokuapp.com/api/bookings/create?authToken=${token}`,\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(placedBooking)\r\n      }\r\n    )\r\n      .then(res => res.json())\r\n      .then(resData => {\r\n        setBookings(bookings => ({\r\n          list: [resData, ...bookings.list],\r\n          totalCount: bookings.totalCount + 1\r\n        }));\r\n\r\n        setFormError({ msg: '' });\r\n\r\n        return setBooking(booking =>\r\n          Object.keys(booking).reduce((acc, field) => {\r\n            acc[field] = '';\r\n\r\n            return acc;\r\n          }, {})\r\n        );\r\n      })\r\n      .catch(err => console.error(err));\r\n  };\r\n\r\n  return (\r\n    <header id=\"hero\">\r\n      <div id=\"ticket-reservation\" className=\"container\">\r\n        <form\r\n          className=\"hero__form\"\r\n          onSubmit={e => handleTicketReservation(e, booking)}\r\n        >\r\n          <h1 className=\"hero__form__heading\">\r\n            Book International Flight Tickets Instantly\r\n          </h1>\r\n          {formError.msg && (\r\n            <div className=\"hero__form__error\">&#9888; {formError.msg}</div>\r\n          )}\r\n          <div className=\"hero__form__fields\">\r\n            <div className=\"hero__form__field\">\r\n              <label htmlFor=\"firstName\">First Name</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"firstName\"\r\n                id=\"firstName\"\r\n                value={booking.firstName}\r\n                onChange={e =>\r\n                  setBooking(booking => ({\r\n                    ...booking,\r\n                    [e.target.name]: e.target.value\r\n                  }))\r\n                }\r\n              />\r\n            </div>\r\n            <div className=\"hero__form__field\">\r\n              <label htmlFor=\"lastName\">Last Name</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"lastName\"\r\n                id=\"lastName\"\r\n                value={booking.lastName}\r\n                onChange={e =>\r\n                  setBooking(booking => ({\r\n                    ...booking,\r\n                    [e.target.name]: e.target.value\r\n                  }))\r\n                }\r\n              />\r\n            </div>\r\n            <div className=\"hero__form__field\">\r\n              <label htmlFor=\"departureAirportId\">Departure Airport</label>\r\n              <select\r\n                name=\"departureAirportId\"\r\n                id=\"departureAirportId\"\r\n                value={booking.departureAirportId || 'default'}\r\n                onChange={e =>\r\n                  setBooking(booking => ({\r\n                    ...booking,\r\n                    [e.target.name]: e.target.value\r\n                  }))\r\n                }\r\n              >\r\n                <option value=\"default\">please choose</option>\r\n                {airports.map(airport => (\r\n                  <option key={airport.id} value={airport.id}>\r\n                    {airport.title}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div className=\"hero__form__field\">\r\n              <label htmlFor=\"arrivalAirportId\">Arrival Airport</label>\r\n              <select\r\n                name=\"arrivalAirportId\"\r\n                id=\"arrivalAirportId\"\r\n                value={booking.arrivalAirportId || 'default'}\r\n                onChange={e =>\r\n                  setBooking(booking => ({\r\n                    ...booking,\r\n                    [e.target.name]: e.target.value\r\n                  }))\r\n                }\r\n              >\r\n                <option value=\"default\">please choose</option>\r\n                {airports.map(airport => (\r\n                  <option key={airport.id} value={airport.id}>\r\n                    {airport.title}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div className=\"hero__form__field\">\r\n              <label htmlFor=\"departureDate\">Departure Date</label>\r\n              <input\r\n                type=\"date\"\r\n                name=\"departureDate\"\r\n                id=\"departureDate\"\r\n                value={booking.departureDate}\r\n                onChange={e =>\r\n                  setBooking(booking => ({\r\n                    ...booking,\r\n                    [e.target.name]: e.target.value\r\n                  }))\r\n                }\r\n              />\r\n            </div>\r\n            <div className=\"hero__form__field\">\r\n              <label htmlFor=\"returnDate\">Return Date</label>\r\n              <input\r\n                type=\"date\"\r\n                name=\"returnDate\"\r\n                id=\"returnDate\"\r\n                value={booking.returnDate}\r\n                onChange={e =>\r\n                  setBooking(booking => ({\r\n                    ...booking,\r\n                    [e.target.name]: e.target.value\r\n                  }))\r\n                }\r\n              />\r\n            </div>\r\n          </div>\r\n          <button type=\"submit\" className=\"hero__form__button\">\r\n            Book It\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default TicketReservation;\r\n","import token from './../common/token';\r\n\r\nconst UserReservations = ({ airports, bookings, setBookings }) => {\r\n  const handleReservationDelete = bookingId => {\r\n    fetch(\r\n      `https://vm-fe-interview-task.herokuapp.com/api/bookings/delete/${bookingId}?authToken=${token}`,\r\n      {\r\n        method: 'DELETE'\r\n      }\r\n    )\r\n      .then(res => {\r\n        if (res.ok) {\r\n          return setBookings(bookings => ({\r\n            list: bookings.list.filter(booking => booking.id !== bookingId),\r\n            totalCount: bookings.totalCount - 1\r\n          }));\r\n        }\r\n\r\n        throw new Error('Something went wrong.');\r\n      })\r\n      .catch(err => console.error(err));\r\n  };\r\n\r\n  return (\r\n    <section className=\"reservations\">\r\n      <div id=\"reservations\" className=\"container\">\r\n        <div className=\"reservations__block\">\r\n          {bookings && (\r\n            <h2\r\n              className=\"reservations__heading\"\r\n              data-reservations-count={bookings.totalCount}\r\n            >\r\n              My Bookings\r\n            </h2>\r\n          )}\r\n          {airports && bookings.list && !!bookings.list.length && (\r\n            <div className=\"reservations__view\">\r\n              {bookings.list.map(booking => (\r\n                <div key={booking.id} className=\"reservations__tracker\">\r\n                  <div className=\"reservations__tracker__top\">\r\n                    <div className=\"reservations__tracker__top__user\">\r\n                      {booking.firstName} {booking.lastName}\r\n                    </div>\r\n                    <div\r\n                      className=\"reservations__tracker__top__action\"\r\n                      onClick={() => handleReservationDelete(booking.id)}\r\n                    >\r\n                      &#10006;\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"reservations__tracker__body\">\r\n                    <div className=\"reservations__tracker__body__item\">\r\n                      <span>\r\n                        {\r\n                          new Date(booking.departureDate)\r\n                            .toLocaleString('en-GB')\r\n                            .split(',')[0]\r\n                        }\r\n                      </span>\r\n                      <span>\r\n                        &#9992; [\r\n                        {\r\n                          airports.filter(\r\n                            airport => airport.id === booking.departureAirportId\r\n                          )[0]?.code\r\n                        }\r\n                        ]\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"reservations__tracker__body__item\">\r\n                      <span></span>\r\n                      <span>ID: {booking.id}</span>\r\n                    </div>\r\n                    <div className=\"reservations__tracker__body__item\">\r\n                      <span>\r\n                        {\r\n                          new Date(booking.returnDate)\r\n                            .toLocaleString('en-GB')\r\n                            .split(',')[0]\r\n                        }\r\n                      </span>\r\n                      <span>\r\n                        &#9992; [\r\n                        {\r\n                          airports.filter(\r\n                            airport => airport.id === booking.arrivalAirportId\r\n                          )[0]?.code\r\n                        }\r\n                        ]\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default UserReservations;\r\n","const Footer = () => {\r\n  return (\r\n    <footer id=\"main-footer\">\r\n      <div className=\"container\">\r\n        <div className=\"footer__content\">\r\n          &#169; Copyright by{' '}\r\n          <a\r\n            href=\"https://www.google.com/\"\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n            title=\"Github Profile\"\r\n          >\r\n            Ivan Aleksandrov\r\n          </a>\r\n          . Do not copy or distribute without the permission of the copyright\r\n          owner.\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","const paginationSettings = {\r\n  pageSize: 4\r\n};\r\n\r\nexport default paginationSettings;\r\n","import { useState, useEffect } from 'react';\r\nimport Navigation from './../components/Navigation';\r\nimport TicketReservation from './../components/TicketReservation';\r\nimport UserReservations from './../components/UserReservations';\r\nimport Footer from './../components/Footer';\r\nimport token from './../common/token';\r\nimport paginationSettings from './../common/pagination-settings';\r\n\r\nconst Homepage = () => {\r\n  const [airports, setAirports] = useState([]);\r\n  const [bookings, setBookings] = useState({ list: [], totalCount: 0 });\r\n  const [page, setPage] = useState(0);\r\n\r\n  useEffect(() => {\r\n    fetch('https://vm-fe-interview-task.herokuapp.com/api/airports')\r\n      .then(res => res.json())\r\n      .then(resData => setAirports(resData))\r\n      .catch(err => console.error(err));\r\n  }, []);\r\n\r\n  /* when placed in the dependency array - 'bookings.list.length' causes infinite component rerendering */\r\n  /* eslint \"react-hooks/exhaustive-deps\": \"off\" */\r\n  useEffect(() => {\r\n    fetch(\r\n      `https://vm-fe-interview-task.herokuapp.com/api/bookings?authToken=${token}&pageIndex=${page}&pageSize=${paginationSettings.pageSize}`\r\n    )\r\n      .then(res => res.json())\r\n      .then(resData => {\r\n        if (!bookings.list.length) {\r\n          return setBookings(resData);\r\n        }\r\n\r\n        return setBookings(existingBookings => ({\r\n          list: [...existingBookings.list, ...resData.list],\r\n          totalCount: existingBookings.totalCount\r\n        }));\r\n      })\r\n      .catch(err => console.error(err));\r\n  }, [page]);\r\n\r\n  /* this is so lame, but I haven't learned Intersection Observer API yet */\r\n  window.onscroll = () => {\r\n    if (\r\n      window.innerHeight + document.documentElement.scrollTop ===\r\n        document.documentElement.offsetHeight &&\r\n      page * paginationSettings.pageSize < bookings.list.length\r\n    ) {\r\n      return setPage(page => page + 1);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navigation />\r\n      <TicketReservation airports={airports} setBookings={setBookings} />\r\n      <UserReservations\r\n        airports={airports}\r\n        bookings={bookings}\r\n        setBookings={setBookings}\r\n      />\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Homepage;\r\n","import '@fontsource/open-sans';\nimport './styles/main.scss';\nimport Homepage from './views/Homepage';\n\nconst App = () => {\n  return <Homepage />;\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App.jsx';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}