(this.webpackJsonphypoportair=this.webpackJsonphypoportair||[]).push([[0],{15:function(e,t,r){},17:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),i=r(9),c=r.n(i),o=(r(14),r(15),r(6)),s=r(3),l=r.p+"static/media/logo.d176cb36.svg",u=r(0),d=function(e){var t=e.menuLinks,r=Object(n.useState)(null),a=Object(s.a)(r,2),i=a[0],c=a[1];return Object(u.jsx)("ul",{className:"main-menu",children:t.map((function(e){return Object(u.jsx)("li",{className:"main-menu__item",children:Object(u.jsx)("a",{href:e.pointer,className:e.pointer===(null===i||void 0===i?void 0:i.pointer)?"main-menu__link--active":"main-menu__link",onClick:function(){return c(e)},children:e.name})},e.pointer)}))})},j=[{name:"Book Flight",pointer:"#ticket-reservation"},{name:"My Bookings",pointer:"#reservations"}],m=function(){return Object(u.jsx)("nav",{id:"main-nav",children:Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("img",{src:l,alt:"HypoportAIR",className:"logo"}),Object(u.jsx)(d,{menuLinks:j})]})})},h=r(4),b=r(2),p={firstName:function(e){return"string"===typeof e&&e.trim().length>0&&e.trim().length<=30||{msg:"Invalid first name."}},lastName:function(e){return"string"===typeof e&&e.trim().length>0&&e.trim().length<=30||{msg:"Invalid last name."}},departureAirportId:function(e){return!!(parseInt(e)&&e>0)||{msg:"Invalid departure airport id."}},arrivalAirportId:function(e){return!!(parseInt(e)&&e>0)||{msg:"Invalid arrival airport id."}},departureDate:function(e){return Date.parse(new Date(e))>Date.now()||{msg:"Invalid departure date."}},returnDate:function(e){return Date.parse(new Date(e))>Date.now()+1728e4||{msg:"Invalid return date."}}},f="iBpxiMGev7IfACzGv25UgB24EbkFxY",O=function(e){var t=e.airports,r=e.setBookings,a=Object(n.useState)({firstName:"",lastName:"",departureAirportId:"",arrivalAirportId:"",departureDate:"",returnDate:""}),i=Object(s.a)(a,2),c=i[0],l=i[1],d=Object(n.useState)({msg:""}),j=Object(s.a)(d,2),m=j[0],O=j[1];return Object(u.jsx)("header",{id:"hero",children:Object(u.jsx)("div",{id:"ticket-reservation",className:"container",children:Object(u.jsxs)("form",{className:"hero__form",onSubmit:function(e){return function(e,t){e.preventDefault(),Object.entries(t).every((function(e){var t=Object(s.a)(e,2),r=t[0],n=t[1],a=p[r](n);return!0===a||(O(a),!1)}))&&fetch("https://vm-fe-interview-task.herokuapp.com/api/bookings/create?authToken=".concat(f),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return r((function(t){return{list:[e].concat(Object(o.a)(t.list)),totalCount:t.totalCount+1}})),O({msg:""}),l((function(e){return Object.keys(e).reduce((function(e,t){return e[t]="",e}),{})}))})).catch((function(e){return console.error(e)}))}(e,c)},children:[Object(u.jsx)("h1",{className:"hero__form__heading",children:"Book International Flight Tickets Instantly"}),m.msg&&Object(u.jsxs)("div",{className:"hero__form__error",children:["\u26a0 ",m.msg]}),Object(u.jsxs)("div",{className:"hero__form__fields",children:[Object(u.jsxs)("div",{className:"hero__form__field",children:[Object(u.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(u.jsx)("input",{type:"text",name:"firstName",id:"firstName",value:c.firstName,onChange:function(e){return l((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))}})]}),Object(u.jsxs)("div",{className:"hero__form__field",children:[Object(u.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(u.jsx)("input",{type:"text",name:"lastName",id:"lastName",value:c.lastName,onChange:function(e){return l((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))}})]}),Object(u.jsxs)("div",{className:"hero__form__field",children:[Object(u.jsx)("label",{htmlFor:"departureAirportId",children:"Departure Airport"}),Object(u.jsxs)("select",{name:"departureAirportId",id:"departureAirportId",value:c.departureAirportId||"default",onChange:function(e){return l((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))},children:[Object(u.jsx)("option",{value:"default",children:"please choose"}),t.map((function(e){return Object(u.jsx)("option",{value:e.id,children:e.title},e.id)}))]})]}),Object(u.jsxs)("div",{className:"hero__form__field",children:[Object(u.jsx)("label",{htmlFor:"arrivalAirportId",children:"Arrival Airport"}),Object(u.jsxs)("select",{name:"arrivalAirportId",id:"arrivalAirportId",value:c.arrivalAirportId||"default",onChange:function(e){return l((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))},children:[Object(u.jsx)("option",{value:"default",children:"please choose"}),t.map((function(e){return Object(u.jsx)("option",{value:e.id,children:e.title},e.id)}))]})]}),Object(u.jsxs)("div",{className:"hero__form__field",children:[Object(u.jsx)("label",{htmlFor:"departureDate",children:"Departure Date"}),Object(u.jsx)("input",{type:"date",name:"departureDate",id:"departureDate",value:c.departureDate,onChange:function(e){return l((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))}})]}),Object(u.jsxs)("div",{className:"hero__form__field",children:[Object(u.jsx)("label",{htmlFor:"returnDate",children:"Return Date"}),Object(u.jsx)("input",{type:"date",name:"returnDate",id:"returnDate",value:c.returnDate,onChange:function(e){return l((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))}})]})]}),Object(u.jsx)("button",{type:"submit",className:"hero__form__button",children:"Book It"})]})})})},v=function(e){var t=e.airports,r=e.bookings,n=e.setBookings;return Object(u.jsx)("section",{className:"reservations",children:Object(u.jsx)("div",{id:"reservations",className:"container",children:Object(u.jsxs)("div",{className:"reservations__block",children:[r&&Object(u.jsx)("h2",{className:"reservations__heading","data-reservations-count":r.totalCount,children:"My Bookings"}),t&&r.list&&!!r.list.length&&Object(u.jsx)("div",{className:"reservations__view",children:r.list.map((function(e){var r,a;return Object(u.jsxs)("div",{className:"reservations__tracker",children:[Object(u.jsxs)("div",{className:"reservations__tracker__top",children:[Object(u.jsxs)("div",{className:"reservations__tracker__top__user",children:[e.firstName," ",e.lastName]}),Object(u.jsx)("div",{className:"reservations__tracker__top__action",onClick:function(){return t=e.id,void fetch("https://vm-fe-interview-task.herokuapp.com/api/bookings/delete/".concat(t,"?authToken=").concat(f),{method:"DELETE"}).then((function(e){if(e.ok)return n((function(e){return{list:e.list.filter((function(e){return e.id!==t})),totalCount:e.totalCount-1}}));throw new Error("Something went wrong.")})).catch((function(e){return console.error(e)}));var t},children:"\u2716"})]}),Object(u.jsxs)("div",{className:"reservations__tracker__body",children:[Object(u.jsxs)("div",{className:"reservations__tracker__body__item",children:[Object(u.jsx)("span",{children:new Date(e.departureDate).toLocaleString("en-GB").split(",")[0]}),Object(u.jsxs)("span",{children:["\u2708 [",null===(r=t.filter((function(t){return t.id===e.departureAirportId}))[0])||void 0===r?void 0:r.code,"]"]})]}),Object(u.jsxs)("div",{className:"reservations__tracker__body__item",children:[Object(u.jsx)("span",{}),Object(u.jsxs)("span",{children:["ID: ",e.id]})]}),Object(u.jsxs)("div",{className:"reservations__tracker__body__item",children:[Object(u.jsx)("span",{children:new Date(e.returnDate).toLocaleString("en-GB").split(",")[0]}),Object(u.jsxs)("span",{children:["\u2708 [",null===(a=t.filter((function(t){return t.id===e.arrivalAirportId}))[0])||void 0===a?void 0:a.code,"]"]})]})]})]},e.id)}))})]})})})},_=function(){return Object(u.jsx)("footer",{id:"main-footer",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"footer__content",children:["\xa9 Copyright by"," ",Object(u.jsx)("a",{href:"https://www.google.com/",target:"_blank",rel:"noreferrer",title:"Github Profile",children:"Ivan Aleksandrov"}),". Do not copy or distribute without the permission of the copyright owner."]})})})},g={pageSize:4},x=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),r=t[0],a=t[1],i=Object(n.useState)({list:[],totalCount:0}),c=Object(s.a)(i,2),l=c[0],d=c[1],j=Object(n.useState)(0),h=Object(s.a)(j,2),b=h[0],p=h[1];return Object(n.useEffect)((function(){fetch("https://vm-fe-interview-task.herokuapp.com/api/airports").then((function(e){return e.json()})).then((function(e){return a(e)})).catch((function(e){return console.error(e)}))}),[]),Object(n.useEffect)((function(){fetch("https://vm-fe-interview-task.herokuapp.com/api/bookings?authToken=".concat(f,"&pageIndex=").concat(b,"&pageSize=").concat(g.pageSize)).then((function(e){return e.json()})).then((function(e){return l.list.length?d((function(t){return{list:[].concat(Object(o.a)(t.list),Object(o.a)(e.list)),totalCount:t.totalCount}})):d(e)})).catch((function(e){return console.error(e)}))}),[b]),window.onscroll=function(){if(window.innerHeight+document.documentElement.scrollTop===document.documentElement.offsetHeight&&b*g.pageSize<l.list.length)return p((function(e){return e+1}))},Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(m,{}),Object(u.jsx)(O,{airports:r,setBookings:d}),Object(u.jsx)(v,{airports:r,bookings:l,setBookings:d}),Object(u.jsx)(_,{})]})},k=function(){return Object(u.jsx)(x,{})};c.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(k,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.adcaa9dc.chunk.js.map